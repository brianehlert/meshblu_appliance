# Meshblu - the message server for all
# Upstart configuration

description "appliance instance of meshblu"
author "Brian Ehlert <brian.ehlert@citrix.com>"

respawn

start on starting mongod
stop on runlevel [06]

# console output

expect fork

# exec /usr/bin/node /var/www/meshblu/server.js --http --coap --mqtt

script
	exec forever --sourceDir /var/www/meshblu \
	start -a -l /var/log/meshblu/meshblu.log \
	-o /var/log/meshblu/meshblu.stdout.log \
	-e /var/log/meshblu/meshblu.stderr.log \
	--uid "meshblu" \
	-c /usr/bin/node server.js --http --coap --mqtt
end script
